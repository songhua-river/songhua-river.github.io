---
title: 用户权限和组管理
mathjax: true
abbrlink: 511aea70
date: 2020-09-28 11:42:17
categories:
- Linux
- 基础命令
tags: 
- Linux
---

#### 基本概念

+ 用户 是 Linux 系统工作中重要的一环，用户管理包括 用户 与 组 管理

+ 在 Linux 系统中，不论是由本机或是远程登录系统，每个系统都必须拥有一个账号，并且对于不同的系统资源拥有不同的使用权限

+ 在 Linux 中，可以指定 每一个用户 针对 不同的文件或者目录 的 不同权限对 文件／目录 的权限包括：

|序号 | 权限 | 英文 | 缩写 | 数字代号 |
| :---: | :---: | :---: | :---: | :---: |
| 01 | 读 | read | r | 4 |
| 02 | 写 | write | w | 2 |
| 03 | 执行 | excute | x | 1 |

#### 组

+ 为了方便用户管理，提出了 组 的概念，如下图所示

+ 在实际应用中，可以预先针对 组 设置好权限，然后 将不同的用户添加到对应的组中，从而不用依次为每一个用户设置权限

#### ls -l 扩展

+ ls -l 可以查看文件夹下文件的详细信息，从左到右依次是：

    + 权限，第 1 个字符如果是 d 表示目录

    + 硬链接数，通俗地讲，就是有多少种方式，可以访问到当前目录／文件

      文件硬链接数为1，只能通过一种绝对路径访问

      文件夹的硬连接数取决于子文件夹的数量，可以在当前文件夹通过 `.`方法，也可以在子文件夹通过 `..` 访问

    + 拥有者，家目录下 文件／目录 的拥有者通常都是当前用户

    + 组，在 Linux 中，很多时候，会出现组名和用户名相同的情况

    + 大小

    + 创建/修改时间

    + 名称

![](0001.jpg)


#### chmod

chmod 可以修改 用户／组 对 文件／目录 的权限

```bash
chmod +/-rwx 文件名|目录名
```

> 以上方式会一次性修改 拥有者 / 组 权限

读权限控制目录是否可以被访问

取消文件的可读可写权限
```
chmod -rw xxx.md
```
增加文件的可读权限
```
chmod +r xxx.md
```

在添加文件的可执行权限后,文件名变为绿色

```
chmod +x test.js
```
![](modnx.png)

![](modx.png)

**对目录的权限操作**

+ 可读权限控制目录是否可以被访问

![](dirmodr.png)

+ 可读权限控制目录中是否可以创建文件

![](dirmodw.png)

+ 可读可写都需要可执行权限,且如果没有可执行权限目录不能被访问

![](dirmodx.png)


#### 超级用户

+ Linux 系统中的 root 账号通常 用于系统的维护和管理，对操作系统的所有资源 具有所有访问权限

+ 在大多数版本的 Linux 中，都不推荐 直接使用 root 账号登录系统

+ 在 Linux 安装的过程中，系统会自动创建一个用户账号，而这个默认的用户就称为“标准用户”

**sudo**

+ su 是 substitute user 的缩写，表示 使用另一个用户的身份

+ sudo 命令用来以其他身份来执行命令，预设的身份为 root

+ 用户使用 sudo 时，必须先输入密码，之后有 5 分钟的有效期限，超过期限则必须重新输入密码

> 若其未经授权的用户企图使用 sudo，则会发出警告邮件给管理员

#### 组管理

> 创建组 / 删除组 的终端命令都需要通过 sudo 执行

| 序号 | 命令 | 作用 |
| --- | --- | --- |
| 01 | groupadd 组名 | 添加组 |
| 02 | groupdel 组名 | 删除组 |
| 03 | cat /etc/group | 确认组信息 |
| 04 | chgrp -R 组名 文件/目录名 | 递归修改文件/目录的所属组 |

>  组信息保存在 /etc/group 文件中

   /etc 目录是专门用来保存 系统配置信息 的目录

在实际应用中，可以预先针对 组 设置好权限，然后 将不同的用户添加到对应的组中，从而不用依次为每一个用户设置权限

+ 新建文件夹dev

```bash
mkdir zhen
```

+ 新建组zhengrp

```bash
sudo groupadd zhengrp
```

+ 把`zhen`目录的组修改为`zhengrp`

```bash
sudo chgrp -R zhengrp zhen
```

![](0002.png)