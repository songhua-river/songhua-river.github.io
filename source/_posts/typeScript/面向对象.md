---
layout: post
title: TypeScript 面向对象
categories:
  - TypeScript
tags:
  - TypeScript
abbrlink: aebe9158
date: 2021-01-14 23:26:07
---

#### 定义类

```javascript
class C {
  constructor(n: string) { 
    this.name = n;// 构造函数，为定义的属性赋值
  }
  name: string; // 定义属性 省略前面的public关键字

  readonly age:number =  18 // 只读属性

  static readonly age: number = 1;

  run():void{ // 定义方法
    console.log('void')
  }

}
```

#### 抽象类

不能当作构造函数，抽象方法必须被子类实现

```javascript
abstract class Person {
  abstract say(): void
}

class Lisa extends Person {
  say() { }
}
```

#### 接口

定义类的结构，声明包含的属性和方法，接口也可以当作类型声明去使用

接口可以在定义类的时候限制类的结构，接口中所有属性都不应该有实际的值

接口只定义对象的结构，接口中的所有方法都是抽象方法


同名结构声明的类型会合并，如果一个对象使用了该接口，必须包含所有的属性

```javascript
interface MyObj {
  prop1: string,
  prop2: number
}
interface MyObj {
  prop3: Boolean
}

const obj: MyObj = {
  prop1: '1',
  prop2: 2,
  prop3: true,
}
```

定义类时可以让类去实现一个接口

```javascript
interface PersonInterface {
  name: string,
  age: number,
  say(method: string): boolean
}

class JiaZhen implements PersonInterface {
  name: string = '1';
  age: number = 1;
  say(method: string): boolean {
    return true;
  }
}
```

#### 属性的封装

类的属性如果可以随意被修改，可能导致运算时的错误

TS提供了三种属性的修饰符

public: 公有 在类，子类 类外面都可以访问

protected: 保护类型 在类里面，子类里面可以访问，在类外部没法访问

private: 私有 在类里面可以方法，子类，类外都不能访问

属性如果不加修饰符就是共有


#### 泛型

定义函数或者类时遇到类型不确定时使用泛型，可以使用多个

```javascript
function jiazhen<Z>(age: Z): Z {
  return age;
}

jiazhen(19);

jiazhen<Number>(19) // 主动指明泛型
```

指明泛型Z必须是interface的实现类

```javascript
interface Zhen {
  age: number,
  love(who: string): boolean
}

function jiazhen<Z extends Zhen>(obj: Z): any {
  return obj.love;
}

jiazhen<Zhen>({
  age: 1,
  love(a) {
    return true;
  }
})
```

指明类初始化时的泛型

```javascript
class A<T>{
  name: T;
  constructor(a: T) {
    this.name = a
  }
}

new A<string>('10')
```