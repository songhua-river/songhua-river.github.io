<!DOCTYPE html>


<html lang="zh-CN">


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/remixicon.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?e6048c3e856b5cbdb1e6ef6e00d5b63d";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <div class="bg-box-wrapper">
        <img src="/images/cover-blur.jpg" data-uhd-src="/images/cover-uhd.jpg" alt="image frame" class="cover-progressive-img" id="cover-img"/>
      </div>
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">å››æœˆå…«æ—¥</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['æœ€è½»çš„å¹¶ä¸æ˜¯ä¸€æ ¹ç¾½æ¯›ï¼Œè€Œæ˜¯ä¸€åŒé£é¸Ÿçš„ç¿…è†€', 'æ„¿ä½ è¶³å¤Ÿå¼ºå¤§ï¼Œä¹Ÿè¦è¶³å¤Ÿæ¸©æŸ”', ''],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  <article class="articles">
    
    
    
    
    <article
  id="post-webpack/é…ç½®ä¼˜åŒ–"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/bef1e5aa/"
    >é…ç½®ä¼˜åŒ–</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/bef1e5aa/" class="article-date">
  <time datetime="2021-01-20T18:08:38.000Z" itemprop="datePublished">2021-01-21</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/webpack/">webpack</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h5 id="HMR-æ¨¡å—çƒ­æ›¿æ¢"><a href="#HMR-æ¨¡å—çƒ­æ›¿æ¢" class="headerlink" title="HMR æ¨¡å—çƒ­æ›¿æ¢"></a>HMR æ¨¡å—çƒ­æ›¿æ¢</h5><p>å½“ä¸€ä¸ªæ¨¡å—æ”¹å˜æ—¶é¿å…æ‰€æœ‰çš„æ¨¡å—éƒ½è¢«é‡æ–°ç¼–è¯‘ä¸€æ¬¡ï¼Œåº”è¯¥åªæ›´æ–°ä¿®æ”¹çš„æ¨¡å—</p>
<p>é€šè¿‡ <code>hot:true</code> å¼€å¯hmrï¼Œæ­¤æ—¶æ ·å¼æ–‡ä»¶(.css .scss) å¯ä»¥è¿›è¡Œçƒ­æ¨¡å—æ›¿æ¢ï¼Œ<code>style-loader</code>å†…éƒ¨çš„å®ç°ï¼Œä½†æ˜¯jsæ–‡ä»¶æ²¡æœ‰å¼€å¯çƒ­æ›¿æ¢ï¼Œè€Œä¸”htmlçš„æ–‡ä»¶ä¹Ÿä¸èƒ½æ›´æ–°äº†</p>
<p>å› ä¸ºçƒ­æ›¿æ¢é˜»æ­¢äº†åˆ·æ–°ï¼Œé€šè¿‡ä¿®æ”¹<code>webpack.config.js</code> å…¥å£é…ç½®<code>entry: [&#39;./src/index.js&#39;,&#39;./src/index.html&#39;],</code>,å¯ä»¥é‡æ–°å¼€å¯<code>index.html</code>çš„åˆ·æ–°åŠŸèƒ½</p>
<p>å¦å¤– <code>html</code>æ–‡ä»¶ä¸éœ€è¦çƒ­æ›¿æ¢çš„åŠŸèƒ½ï¼Œå› ä¸ºæ¯ä¸ªå…¥å£åªå¯¹åº”ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€å®šè¦é‡æ–°åŠ è½½</p>
<p><code>.js</code>æ–‡ä»¶çš„çƒ­æ›¿æ¢ä¸èƒ½æ˜¯å…¥å£æ–‡ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">&#x27;./print.js&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Accepting the updated printMe module!&#x27;</span>);</span><br><span class="line">    printMe();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="source-map"><a href="#source-map" class="headerlink" title="source-map"></a>source-map</h5><p>æä¾›æºä»£ç åˆ°ç¼–è¯‘åä»£ç æ˜ å°„çš„æ–¹æ¡ˆï¼Œå¯ä»¥è¿½è¸ªæºä»£ç çš„ä½ç½® é€šè¿‡<a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/devtool/#root">devtool</a>é…ç½®</p>
<p>[inline-|hidden-|eval][nosources-][cheap-[module-]]source-map</p>
<p>inline æ„å»ºé€Ÿåº¦å¿«</p>
<p>source-map èƒ½æç¤ºé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ï¼Œå’Œæºä»£ç ä¸­å‡†ç¡®ä½ç½®ï¼Œä¼šå•ç‹¬ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶</p>
<p>inline-source-map source-mapä¼šå†…åµŒåˆ°ç”Ÿæˆçš„jsæ–‡ä»¶ä¸­ï¼Œåªç”Ÿæˆä¸€ä¸ªå†…è”çš„source-map ï¼Œèƒ½æç¤ºé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ï¼Œå’Œæºä»£ç ä¸­å‡†ç¡®ä½ç½®</p>
<p>eval-source-map source-mapä¼šå†…åµŒåˆ°ç”Ÿæˆçš„jsæ–‡ä»¶ä¸­,æ¯ä¸ªæ–‡ä»¶éƒ½ä¼šç”Ÿæˆå¯¹åº”çš„source-mapï¼Œå¯ä»¥æç¤ºé”™è¯¯åŸå› ï¼Œä½†ä¸èƒ½è¿½è¸ªåˆ°æºä»£ç ä½ç½®ï¼Œåªä¼šå®šä½åˆ°ç¼–è¯‘åçš„é”™è¯¯ä½ç½®</p>
<p>hidden-source-map source-mapæ–‡ä»¶ä¼šå•ç‹¬ç”Ÿæˆï¼Œå¯ä»¥æç¤ºé”™è¯¯åŸå› ï¼Œä½†ä¸èƒ½è¿½è¸ªåˆ°æºä»£ç ä½ç½®ï¼Œåªä¼šå®šä½åˆ°ç¼–è¯‘åçš„é”™è¯¯ä½ç½®</p>
<p>cheap-source-map åœ¨å¤–éƒ¨å•ç‹¬ç”Ÿæˆï¼Œåªèƒ½æç¤ºåˆ°è¡Œï¼Œå¦‚æœä»£ç åœ¨ä¸€è¡Œä¸­ï¼Œä¸èƒ½å‡†ç¡®çš„å®šä½</p>
<p>cheap-module-source-map åœ¨å¤–éƒ¨å•ç‹¬ç”Ÿæˆ ä¸ cheap-source-map ç±»ä¼¼,ä¼šå°†loaderçš„source-mapåŠ å…¥</p>
<p>nosources-source-map å¯ä»¥æä¾›ä½œç‰©ä¿¡æ¯ï¼Œä½†æ˜¯ä¸èƒ½å®šä½åˆ°é”™è¯¯ä½ç½®ï¼Œæºä»£ç å’Œç¼–è¯‘åä»£ç éƒ½ä¸å¯ä»¥</p>
<p>æ•°åº¦å¿«æ…¢: eval=&gt; inline =&gt; cheap</p>
<p>å¼€å‘ç¯å¢ƒï¼šcheap-source-map<br>  é€Ÿåº¦å¿«<br>    eval-cheap-source-map<br>    eval-source-map ğŸ†š<br>  è°ƒè¯•å‹å¥½<br>    source-map<br>    cheap-module-source-map<br>    cheap-source-map</p>
<p>ç”Ÿäº§ç¯å¢ƒ<br>  ç®€å•è°ƒè¯•ï¼Œ<br>  å†…è”ä¼šè®©ä½“ç§¯å˜å¤§<br>  nosources-source-map å…¨éƒ¨éšè—ä»£ç ï¼Œåœ¨çº¿ä¸Šç¯å¢ƒä½¿ç”¨ğŸ†š<br>  hidden-source-map  åªéšè—æºä»£ç </p>
<p>  source-map ğŸ†š,å•ç‹¬ç”Ÿæˆæ–‡ä»¶ä¸”ä¾¿äºè°ƒè¯•</p>
<h4 id="oneOf"><a href="#oneOf" class="headerlink" title="oneOf"></a>oneOf</h4><p>ç”¨äºæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œåªè¦æœ‰ä¸€ä¸ªloaderåŒ¹é…åˆ°å°±ä¸ä¼šç»§ç»­åŒ¹é…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="comment">// æŒ‡å®šä¼˜å…ˆçº§ï¼Œéƒ½ä¼šå…ˆè¢«è¿™ä¸ªloaderå¤„ç†</span></span><br><span class="line">        enforce:<span class="string">&#x27;pre&#x27;</span></span><br><span class="line">      &#125;ï¼Œ</span><br><span class="line">      &#123;</span><br><span class="line">        oneOf:[</span><br><span class="line">          <span class="comment">// å…¶ä»–çš„loader</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h4><p>åœ¨ç¼–è¯‘æ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶æ²¡æœ‰æ”¹å˜ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ç¼–è¯‘å¥½çš„ç¼“å­˜æ–‡ä»¶ï¼Œæ— éœ€æ‰€æœ‰æ–‡ä»¶éƒ½é‡æ–°ç¼–è¯‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/i</span>,</span><br><span class="line">  use: [&#123;</span><br><span class="line">    loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">    options:&#123;</span><br><span class="line">      cacheDirectory:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶èµ„æºçš„ç¼“å­˜ </p>
<ul>
<li><p>hash å¦‚æœéƒ½ä½¿ç”¨hashçš„è¯ï¼Œå³æ¯æ¬¡ä¿®æ”¹ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰æ–‡ä»¶åçš„hashè‡³éƒ½å°†æ”¹å˜ã€‚æ‰€ä»¥ä¸€æ—¦ä¿®æ”¹äº†ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œæ•´ä¸ªé¡¹ç›®çš„æ–‡ä»¶ç¼“å­˜éƒ½å°†å¤±æ•ˆ.</p>
</li>
<li><p>chunkhash chunkhashæ ¹æ®ä¸åŒçš„å…¥å£æ–‡ä»¶(Entry)è¿›è¡Œä¾èµ–æ–‡ä»¶è§£æã€æ„å»ºå¯¹åº”çš„chunkï¼Œç”Ÿæˆå¯¹åº”çš„å“ˆå¸Œå€¼ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒé‡ŒæŠŠä¸€äº›å…¬å…±åº“å’Œç¨‹åºå…¥å£æ–‡ä»¶åŒºåˆ†å¼€ï¼Œå•ç‹¬æ‰“åŒ…æ„å»ºï¼Œæ¥ç€æˆ‘ä»¬é‡‡ç”¨chunkhashçš„æ–¹å¼ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œé‚£ä¹ˆåªè¦æˆ‘ä»¬ä¸æ”¹åŠ¨å…¬å…±åº“çš„ä»£ç ï¼Œå°±å¯ä»¥ä¿è¯å…¶å“ˆå¸Œå€¼ä¸ä¼šå—å½±å“ã€‚åŠ¨æ€importä¹Ÿå—chunkhashçš„å½±å“.</p>
</li>
</ul>
<p>å› ä¸ºæˆ‘ä»¬æ˜¯å°†æ ·å¼ä½œä¸ºæ¨¡å—importåˆ°JavaScriptæ–‡ä»¶ä¸­çš„ï¼Œæ‰€ä»¥å®ƒä»¬çš„chunkhashæ˜¯ä¸€è‡´çš„,è¿™æ ·å°±ä¼šæœ‰ä¸ªé—®é¢˜ï¼Œåªè¦å¯¹åº”cssæˆ–åˆ™jsæ”¹å˜ï¼Œä¸å…¶å…³è”çš„æ–‡ä»¶hashå€¼ä¹Ÿä¼šæ”¹å˜ï¼Œä½†å…¶å†…å®¹å¹¶æ²¡æœ‰æ”¹å˜å‘¢ï¼Œæ‰€ä»¥æ²¡æœ‰è¾¾åˆ°ç¼“å­˜æ„ä¹‰ã€‚å›ºcontenthashçš„ç”¨é€”éšä¹‹è€Œæ¥ã€‚</p>
<ul>
<li>contenthashæ˜¯é’ˆå¯¹æ–‡ä»¶å†…å®¹çº§åˆ«çš„ï¼Œåªæœ‰ä½ è‡ªå·±æ¨¡å—çš„å†…å®¹å˜äº†ï¼Œé‚£ä¹ˆhashå€¼æ‰æ”¹å˜</li>
</ul>
<h4 id="tree-shaking"><a href="#tree-shaking" class="headerlink" title="tree-shaking"></a>tree-shaking</h4><p>ä½¿ç”¨es6æ¨¡å—åŒ–è§„èŒƒï¼Œå¼€å¯productionæ¨¡å¼ï¼Œwebpackä¼šè‡ªåŠ¨å¯ç”¨tree-shaking</p>
<p><code>webpack.config.js</code> ä¸­æ·»åŠ <code>sideEffects:false</code>è¡¨ç¤ºæ‰€æœ‰çš„ä»£ç éƒ½æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¦‚æœæ ‡è®°ä¸º<code>false</code>, å…¨å±€å¼•å…¥çš„æ–‡ä»¶(polyfile),æˆ–æ²¡æœ‰é€šè¿‡æ¨¡å—åŒ–ä½¿ç”¨çš„css,éƒ½ä¼šè¢«åˆ é™¤</p>
<p>å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°ç»„æ¥æ ‡è®°ä¸éœ€è¦å¤„ç†çš„èµ„æº <code>sideEffects:[&#39;*.css&#39;]</code></p>
<h4 id="ä»£ç åˆ†å‰²-code-split"><a href="#ä»£ç åˆ†å‰²-code-split" class="headerlink" title="ä»£ç åˆ†å‰² code-split"></a>ä»£ç åˆ†å‰² code-split</h4><p><strong>ç”Ÿæˆchunkçš„å‡ ç§æ–¹å¼</strong></p>
<ul>
<li>å¤šé¡µé¢entryç”Ÿæˆå¤šä¸ªchunk</li>
<li>å¼‚æ­¥ç»„ä»¶ç”Ÿæˆchunk</li>
<li>code split </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†node-modules ä¸­ä»£ç å•ç‹¬æ‰“åŒ…æˆ</span></span><br><span class="line"><span class="comment">// åˆ†æå¤šå…¥å£æ–‡ä»¶ä¸­æœ‰æ²¡æœ‰å…¬å…±çš„ä¾èµ–ï¼Œä¼šæŠŠä¾èµ–å•ç‹¬æ‰“åŒ…</span></span><br><span class="line">optimization: &#123;</span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">    chunks: <span class="string">&#x27;all&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="æ‡’åŠ è½½-é¢„åŠ è½½"><a href="#æ‡’åŠ è½½-é¢„åŠ è½½" class="headerlink" title="æ‡’åŠ è½½ é¢„åŠ è½½"></a>æ‡’åŠ è½½ é¢„åŠ è½½</h4><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/guides/code-splitting/#dynamic-imports">dynamic-imports</a></p>
<p><code>babel-loader</code>ä¼šè‡ªåŠ¨å¤„ç† <code>dynamic-imports</code>è¯­æ³•ï¼Œ å¦‚æœ<code>eslint</code>æç¤ºé”™è¯¯ï¼Œåœ¨<code>.eslintrc</code>ä¸­æ·»åŠ <code>&quot;parser&quot;: &quot;babel-eslint&quot;</code></p>
<h4 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h4><p>work-box -&gt; <a target="_blank" rel="noopener" href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin">workbox-webpack-plugin</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D workbox-webpack-plugin</span><br></pre></td></tr></table></figure>

<p><code>webpack.config.js</code> ä¸­æ·»åŠ æ’ä»¶å’Œ<a target="_blank" rel="noopener" href="https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-webpack-plugin.GenerateSW#GenerateSW">é…ç½®é¡¹</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  plugins:[</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">new</span> GenerateSW(&#123;</span><br><span class="line">      <span class="comment">// å¸®åŠ©serviceWorkå¿«é€Ÿå¯åŠ¨ï¼Œ</span></span><br><span class="line">      <span class="comment">// åˆ é™¤æ—§çš„serverwork</span></span><br><span class="line">      clientsClaim:<span class="literal">true</span>,</span><br><span class="line">      skipWaiting:<span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨å†Œservicework</p>
<p>åœ¨å…¥å£æ–‡ä»¶<code>index.js</code>ä¸­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;serviceWorker&#x27;</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    navigator.serviceWorker.register(<span class="string">&#x27;./service-worker.js&#x27;</span>)</span><br><span class="line">      .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ³¨å†ŒæˆåŠŸ&#x27;</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ³¨å†Œå¤±è´¥&#x27;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ<code>eslint</code>ä¸æ”¯æŒå…¨å±€å˜é‡,åœ¨<code>.eslinrc</code>æ·»åŠ <code>&#123;env:browser: true,&#125;</code></p>
<h4 id="å¤šè¿›ç¨‹æ‰“åŒ…"><a href="#å¤šè¿›ç¨‹æ‰“åŒ…" class="headerlink" title="å¤šè¿›ç¨‹æ‰“åŒ…"></a>å¤šè¿›ç¨‹æ‰“åŒ…</h4><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/thread-loader">thread-loader</a></p>
<p>è¿›ç¨‹çš„å¯ç”¨ä¼šå ç”¨æ—¶é—´ï¼ˆå¤§çº¦600msï¼‰ï¼Œåªæœ‰å¤æ‚çš„ä»»åŠ¡å¤„ç†çš„æ—¶å€™æ‰ä¼šæœ‰æ˜æ˜¾çš„æ•ˆæœ</p>
<h4 id="externals-å¿½ç•¥æŸäº›èµ„æº"><a href="#externals-å¿½ç•¥æŸäº›èµ„æº" class="headerlink" title="externals å¿½ç•¥æŸäº›èµ„æº"></a>externals å¿½ç•¥æŸäº›èµ„æº</h4><p>åœ¨<code>webpack.config.js</code>ä¸­æ·»åŠ <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/externals/#root"><code>externals</code></a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  externals: &#123;</span><br><span class="line">    jquery: <span class="string">&#x27;jQuery&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å’Œdllçš„åŒºåˆ«æ˜¯ï¼Œexternalså¹¶æ²¡æœ‰æ‰“åŒ…æ–‡ä»¶ï¼Œéœ€è¦é€šè¿‡cdnçš„æ–¹å¼å¼•å…¥è¿›æ¥ï¼Œdllåªæ˜¯æŠŠæŒ‡å®šçš„åŒ…å•ç‹¬æ‰“åŒ…ï¼Œå¹¶é€šè¿‡æ’ä»¶æŠŠå•ç‹¬æ‰“åŒ…çš„æ–‡ä»¶é‡æ–°å¼•å…¥</p>
<h4 id="dll"><a href="#dll" class="headerlink" title="dll"></a>dll</h4><p>å¯¹ç¬¬ä¸‰æ–¹çš„åº“ï¼Œè¿›è¡Œå•ç‹¬æ‰“åŒ… webpack5ä¸é€‚ç”¨</p>
<p>é€šè¿‡ä¸¤ä»½é…ç½®ï¼Œå¯ä»¥é¿å…æ¯æ¬¡å¯¹ç¬¬ä¸‰æ–¹çš„åº“é‡æ–°æ‰“åŒ…</p>
<p>webpack.dll.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry:&#123;</span><br><span class="line">    lodash:[<span class="string">&#x27;lodash&#x27;</span>],</span><br><span class="line">    jquery:[<span class="string">&#x27;jquery&#x27;</span>],</span><br><span class="line">    moment:[<span class="string">&quot;moment&quot;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  output:&#123;</span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ–‡ä»¶çš„åç§°</span></span><br><span class="line">    filename:<span class="string">&#x27;[name]_[contenthash:8].js&#x27;</span>,</span><br><span class="line">    path:path.resolve(__dirname,<span class="string">&#x27;dll&#x27;</span>),</span><br><span class="line">    <span class="comment">// å•ç‹¬æ‰“åŒ…çš„åº“å¯¹å¤–æš´éœ²çš„åç§°</span></span><br><span class="line">    library: <span class="string">&quot;[name]_[fullhash]&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins:[</span><br><span class="line">    <span class="keyword">new</span> webpack.DllPlugin(&#123;</span><br><span class="line">      context: __dirname,</span><br><span class="line">      <span class="comment">// æ˜ å°„å•ç‹¬æ‰“åŒ…çš„åº“çš„åç§°</span></span><br><span class="line">      name: <span class="string">&#x27;[name]_[fullhash]&#x27;</span>,</span><br><span class="line">      <span class="comment">// ç”Ÿæˆçš„manifestæ–‡ä»¶</span></span><br><span class="line">      path:path.resolve(__dirname,<span class="string">&#x27;dll/[name]_manifest.json&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  mode:<span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>webpack.config.js</p>
<p>ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/add-asset-html-webpack-plugin">add-asset-html-webpack-plugin</a>æŠŠå•ç‹¬æ‰“åŒ…çš„èµ„æºå¼•å…¥</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  plugins:[</span><br><span class="line">    <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">      <span class="comment">// å­˜åœ¨äºmanifestæ–‡ä»¶ä¸­çš„åŒ…ï¼Œä¸ä¼šè¢«æ‰“åŒ…</span></span><br><span class="line">			manifest: <span class="built_in">require</span>(path.resolve(__dirname,<span class="string">&#x27;dll/moment_manifest.json&#x27;</span>))</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">			manifest: <span class="built_in">require</span>(path.resolve(__dirname,<span class="string">&#x27;dll/lodash_manifest.json&#x27;</span>))</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">			manifest: <span class="built_in">require</span>(path.resolve(__dirname,<span class="string">&#x27;dll/jquery_manifest.json&#x27;</span>))</span><br><span class="line">		&#125;),</span><br><span class="line">    <span class="keyword">new</span> AddAssetHtmlPlugin(&#123;</span><br><span class="line">      filepath: path.resolve(__dirname, <span class="string">&#x27;./dll/*.js&#x27;</span>),</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-javascript/fp/Ramda_Typeæ–¹æ³•"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/54a7cf63/"
    >Ramda Type æ–¹æ³•æºç è§£æ</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/54a7cf63/" class="article-date">
  <time datetime="2021-01-19T08:01:47.000Z" itemprop="datePublished">2021-01-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">å‡½æ•°å¼ç¼–ç¨‹</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><p>toString æ–¹æ³•æ˜¯Objectå†…éƒ¨å®ç°çš„åŸå‹æ–¹æ³•ï¼Œå®ç°æ–¹å¼ä¸­è§„å®šäº†æŸç§ç±»å‹çš„è¿”å›å€¼</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> type = _curry1(<span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> val === <span class="literal">null</span></span><br><span class="line">    ? <span class="string">&#x27;Null&#x27;</span></span><br><span class="line">    : val === <span class="literal">undefined</span></span><br><span class="line">      ? <span class="string">&#x27;Undefined&#x27;</span></span><br><span class="line">      : <span class="built_in">Object</span>.prototype.toString.call(val).slice(<span class="number">8</span>, <span class="number">-1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> type;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-javascript/fp/Ramda_Listæ–¹æ³•"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/6ac7a6cf/"
    >Ramda List æ–¹æ³•æºç åˆ†æ</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/6ac7a6cf/" class="article-date">
  <time datetime="2021-01-19T04:57:53.000Z" itemprop="datePublished">2021-01-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">å‡½æ•°å¼ç¼–ç¨‹</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="adjust"><a href="#adjust" class="headerlink" title="adjust"></a><a target="_blank" rel="noopener" href="https://ramda.cn/docs/#adjust">adjust</a></h4><p>åˆ¤æ–­ç´¢å¼•çš„åˆæ³•æ€§</p>
<p>å®šä¹‰å¼€å§‹èŠ‚ç‚¹ï¼Œå…¶å®å°±æ˜¯æŠ½è±¡äº†è®¡ç®—çœŸå®ç´¢å¼•çš„è®¡ç®—</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> adjust = _curry3(<span class="function"><span class="keyword">function</span> <span class="title">adjust</span>(<span class="params">idx, fn, list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (idx &gt;= list.length || idx &lt; -list.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> start = idx &lt; <span class="number">0</span> ? list.length : <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> _idx = start + idx;</span><br><span class="line">  <span class="keyword">var</span> _list = _concat(list);</span><br><span class="line">  _list[_idx] = fn(list[_idx]);</span><br><span class="line">  <span class="keyword">return</span> _list;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h4 id="all"><a href="#all" class="headerlink" title="all"></a><a target="_blank" rel="noopener" href="https://ramda.cn/docs/#all">all</a></h4><p><a href="/posts/2b6baf0c/#dispatchable">_dispatchable</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> all = _curry2(_dispatchable([<span class="string">&#x27;all&#x27;</span>], _xall, <span class="function"><span class="keyword">function</span> <span class="title">all</span>(<span class="params">fn, list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> idx = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (idx &lt; list.length) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!fn(list[idx])) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    idx += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;));</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> all;</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-javascript/engineering/è°ƒè¯•npmåŒ…"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/8f2be328/"
    >è°ƒè¯•npmåŒ…</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/8f2be328/" class="article-date">
  <time datetime="2021-01-16T14:16:47.000Z" itemprop="datePublished">2021-01-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%B7%A5%E7%A8%8B%E5%8C%96/">å·¥ç¨‹åŒ–</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="npm-yarn-link"><a href="#npm-yarn-link" class="headerlink" title="npm/yarn link"></a>npm/yarn link</h4><p>é€šè¿‡è½¯é“¾æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…</p>
<p>è¿›å…¥æœ¬åœ°npmåŒ…æ–‡ä»¶å¤¹ï¼Œæˆ–é€šè¿‡ <code>git clone</code>æ‹‰å»çš„ç¬¬ä¸‰æ–¹åŒ…æ–‡ä»¶å¤¹ </p>
<p>æ‰§è¡Œ <code>yarn link</code> æˆ– <code>npm link</code> è¿æ¥åˆ°å…¨å±€ï¼ˆyarn ä¸ä¼šæ±¡æŸ“å…¨å±€ï¼‰</p>
<p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ <code>yarn link [ç¬¬ä¸‰æ–¹åŒ…]</code>  æˆ– <code>npm link [ç¬¬ä¸‰æ–¹åŒ…]</code></p>
<p>åœ¨é¡¹ç›®ä¸­é€šè¿‡ <code>yarn unlink [ç¬¬ä¸‰æ–¹åŒ…]</code> æˆ– <code>npm unlink [ç¬¬ä¸‰æ–¹åŒ…]</code> è§£é™¤é“¾æ¥</p>
<p>é€šè¿‡ä¸€ä¸‹å‘½ä»¤å»æ‰å…¨å±€å®‰è£…çš„åŒ… </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm rm --<span class="built_in">global</span> foo </span><br><span class="line">npm ls --<span class="built_in">global</span> foo <span class="comment">// æ£€æŸ¥åŒ…æ˜¯å¦è¢«å®‰è£…</span></span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-webpack/webpackæ ¸å¿ƒæ¦‚å¿µ"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/731d431a/"
    >webpackæ ¸å¿ƒæ¦‚å¿µ</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/731d431a/" class="article-date">
  <time datetime="2021-01-16T13:32:37.000Z" itemprop="datePublished">2021-01-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/webpack/">webpack</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>æ¨èå°±è¿‘å®‰è£…ï¼Œå³å®‰è£…åœ¨é¡¹ç›®ä¸­ï¼Œä¸è¦å®‰è£…åœ¨å…¨å±€ä¸­</p>
<p>é€šè¿‡ <code>npx webpack -v</code> æŸ¥çœ‹é¡¹ç›®ä¸­ webpack ç‰ˆæœ¬</p>
<p><strong>nrm é•œåƒæºç®¡ç†</strong></p>
<p><code>yarn add nrm</code></p>
<p>æŸ¥çœ‹é•œåƒæºåˆ—è¡¨</p>
<p><code>nrm ls</code></p>
<p>æµ‹é€Ÿ</p>
<p><code>nrm test taobao</code></p>
<h4 id="å¸¸ç”¨å·¥å…·"><a href="#å¸¸ç”¨å·¥å…·" class="headerlink" title="å¸¸ç”¨å·¥å…·"></a>å¸¸ç”¨å·¥å…·</h4><h5 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h5><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/clean-webpack-plugin">https://www.npmjs.com/package/clean-webpack-plugin</a></p>
<h4 id="source-map"><a href="#source-map" class="headerlink" title="source-map"></a>source-map</h4><p>cheap-module-source-map ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œä¸èƒ½æš´éœ²æºç </p>
<p>eval-cheap-module-source-map å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  devtool:<span class="string">&#x27;cheap-module-source-map&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="devServer-å’Œçƒ­æ¨¡å—æ›´æ–°"><a href="#devServer-å’Œçƒ­æ¨¡å—æ›´æ–°" class="headerlink" title="devServer å’Œçƒ­æ¨¡å—æ›´æ–°"></a>devServer å’Œçƒ­æ¨¡å—æ›´æ–°</h4><p>å®‰è£…devServer</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D webpack-dev-server</span><br></pre></td></tr></table></figure>

<p>webpack.config.js ä¸­æ·»åŠ é…ç½®é¡¹  </p>
<p>contentBase åªæœ‰éœ€è¦åœ¨è®¿é—®é™æ€æ–‡ä»¶æ—¶å€™ä½¿ç”¨ï¼Œé»˜è®¤ä¸‹é¢ä¸‰ä¸ªé…ç½®é¡¹éƒ½å¯ä»¥ä¸å†™</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  contentBase: path.join(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">  compress: <span class="literal">true</span>,</span><br><span class="line">  port: <span class="number">9000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>package.json ä¸­æ·»åŠ å¯åŠ¨å‘½ä»¤</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>:&#123;</span><br><span class="line">    <span class="attr">&quot;server&quot;</span>: <span class="string">&quot;webpack-dev-server --open&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼€å¯hmr</p>
<p>1.é…ç½®webpack-dev-server<br>2.devServeré…ç½®hot:true<br>3.plugins hotModuleeReplaceMentPlugin<br>4.js æ–‡ä»¶ä¸­æ·»åŠ hmrä»£ç </p>
<p>webpack.config.js ä¸­æ·»åŠ </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">  ...</span><br><span class="line">  hot:<span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">new</span> webpack.NamedModulesPlugin(),</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.js å¢åŠ ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">&#x27;./print.js&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Accepting the updated printMe module!&#x27;</span>);</span><br><span class="line">   printMe();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="output-å’Œ-devserver-ä¸­çš„-publicpath-ä½œç”¨"><a href="#output-å’Œ-devserver-ä¸­çš„-publicpath-ä½œç”¨" class="headerlink" title="output å’Œ devserver ä¸­çš„ publicpath ä½œç”¨"></a>output å’Œ devserver ä¸­çš„ publicpath ä½œç”¨</h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/output/#outputpublicpath">output ä¸­çš„ publicpath</a></p>
<p>è¿™æ˜¯ä¸€ä¸ªåœ¨ä½¿ç”¨æŒ‰éœ€åŠ è½½å’Œå¼•å…¥å¤–éƒ¨èµ„æºï¼ˆå›¾ç‰‡,æ–‡ä»¶ç­‰ï¼‰éå¸¸é‡è¦çš„å±æ€§ï¼Œå¦‚æœè®¾ç½®äº†ä¸€ä¸ªé”™è¯¯çš„å€¼ï¼Œå½“åŠ è½½è¿™äº›èµ„æºæ—¶ä¼šæŠ¥404é”™è¯¯</p>
<p>è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†è¾“å‡ºç›®å½•åœ¨æµè§ˆå™¨ä¸­å¼•ç”¨æ—¶çš„å…¬å…±è·¯å¾„ï¼ˆpublicpathï¼‰,ä¸€ä¸ªç›¸å¯¹è·¯å¾„è¢«è§£æä¸ºç›¸å¯¹äºHTMLé¡µé¢æˆ–[â€µ<base>`æ ‡ç­¾](<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base</a>)</p>
<blockquote>
<base> æ ‡ç­¾ä¸ºé¡µé¢ä¸Šçš„æ‰€æœ‰é“¾æ¥è§„å®šé»˜è®¤åœ°å€æˆ–é»˜è®¤ç›®æ ‡ã€‚
</blockquote>
<p>ç›¸å¯¹æœåŠ¡å™¨çš„è·¯å¾„ï¼Œç›¸å¯¹ä¸åè®®çš„è·¯å¾„ï¼Œæˆ–ç»å¯¹è·¯å¾„éƒ½æ˜¯æœ‰å¯èƒ½çš„ç”šè‡³æœ‰æ—¶æ˜¯å¿…é¡»çš„ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨CMD æ‰˜ç®¡é™æ€èµ„æº</p>
<p>åœ¨è¿è¡Œæ—¶æˆ–loaderå¤„ç†æ—¶ï¼Œæ¯ä¸€ä¸ªURLçš„å‰ç¼€éƒ½ä¼šè¢«è‰²è®¾ç½®æœªé…ç½®é¡¹ä¸­çš„å€¼ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å¾ˆå¤šä¾‹å­ä¸­è¿™ä¸ªé…ç½®é¡¹è¢«è®¾ç½®ä¸º <code>/</code> çš„åŸå› </p>
<p>webpack-dev-server ä¹Ÿéœ€è¦ä»publicPathè·å–ä¿¡æ¯ï¼Œä½¿ç”¨å®ƒæ¥ç¡®å®šä»ä½•å¤„æä¾›è¾“å‡ºæ–‡ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// One of the below</span></span><br><span class="line">    publicPath: <span class="string">&#x27;https://cdn.example.com/assets/&#x27;</span>, <span class="comment">// CDN (always HTTPS)</span></span><br><span class="line">    publicPath: <span class="string">&#x27;//cdn.example.com/assets/&#x27;</span>, <span class="comment">// CDN (same protocol)</span></span><br><span class="line">    publicPath: <span class="string">&#x27;/assets/&#x27;</span>, <span class="comment">// server-relative</span></span><br><span class="line">    publicPath: <span class="string">&#x27;assets/&#x27;</span>, <span class="comment">// relative to HTML page</span></span><br><span class="line">    publicPath: <span class="string">&#x27;../assets/&#x27;</span>, <span class="comment">// relative to HTML page</span></span><br><span class="line">    publicPath: <span class="string">&#x27;&#x27;</span>, <span class="comment">// relative to HTML page (same directory)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/dev-server/#devserverpublicpath-">devServer ä¸­çš„ publicpath</a></p>
<p>æ‰“åŒ…çš„æ–‡ä»¶å¯ä»¥åœ¨æµè§ˆå™¨çš„è¿™ä¸ªç›®å½•ä¸‹é¢å¾—åˆ°</p>
<p>å¦‚æœæœåŠ¡è·‘åœ¨ <a href="http://localhost:8080ï¼Œæ‰“åŒ…çš„æ–‡ä»¶ä¸ºbundle.jsï¼ŒpublicPathä¸º">http://localhost:8080ï¼Œæ‰“åŒ…çš„æ–‡ä»¶ä¸ºbundle.jsï¼ŒpublicPathä¸º</a> <code>/</code>, å¯ä»¥åœ¨ <code>http://localhost:8080/bundle.js</code>è®¿é—®åˆ°æ‰“åŒ…æ–‡ä»¶</p>
<p>å¦‚æœ publicPath æ”¹ä¸º <code>/assets/</code>, é‚£ä¹ˆå¯ä»¥åœ¨ <code>http://localhost:8080/assets/bundle.js</code>è®¿é—®ï¼Œä¹Ÿå¯ä»¥æŠŠ publicPath æ”¹ä¸º <code>http://localhost:8080/assets/</code></p>
<p>è¿™è¯´æ˜äº† devServer.publicPath ä¸ output.publicPath æ˜¯ä¸€è‡´çš„</p>
<h5 id="babel-polyfill-babel-plugin-transform-runtime-babel-runtime-corejs2"><a href="#babel-polyfill-babel-plugin-transform-runtime-babel-runtime-corejs2" class="headerlink" title="@babel/polyfill  @babel/plugin-transform-runtime @babel/runtime-corejs2"></a>@babel/polyfill  @babel/plugin-transform-runtime @babel/runtime-corejs2</h5><p>@babel/preset-env åªä¼šè½¬æ¢æ–°è¯­æ³•ï¼Œä½†æ˜¯ä¸ä¼šè½¬æ¢æ–°çš„api,æ¯”å¦‚ <code>Array.from</code></p>
<p>éœ€è¦ @babel/polyfill è½¬æ¢æ–°çš„api,ä½†æ˜¯ @babel/polyfill ä¼šå…¨é‡å¼•å…¥ï¼Œä¸èƒ½æŒ‰éœ€å¼•å…¥</p>
<p>å¯ä»¥é€šè¿‡ <code>babel.rc</code> é…ç½®æ–‡ä»¶æ¥å®ç° </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;presets&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">      <span class="comment">// This option was removed in v7 by just making it the default.åœ¨æ–°ç‰ˆæœ¬ä¸­å·²ç»ç§»é™¤ï¼Œæ— éœ€æ·»åŠ </span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//   &quot;useBuiltIns&quot;: &quot;usage&quot;</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯@babel/preset-envä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œè™½ç„¶ä¼šæŒ‰éœ€å¼•å…¥ä½†æ˜¯æ¯ä¸ªæ–‡ä»¶å¦‚æœæœ‰é‡å¤çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«ç¼–è¯‘æˆç›¸åŒçš„ä»£ç å¼•å…¥ï¼Œæ–‡ä»¶å¤šçš„æ—¶å€™ä¼šè®©å†—ä½™çš„ä»£ç è¶Šæ¥è¶Šå¤š</p>
<p>@babel/runtime-corejs2 æ˜¯ä¸€ä¸ªéšç€ <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-plugin-transform-runtime">@babel/plugin-transform-runtime</a> ä¸€èµ·æ—¶ä½¿ç”¨çš„è¿è¡Œæ—¶ä¾èµ–ï¼Œä¼šæŠŠé‡å¤çš„å‡½æ•°è¦†ç›–ä¸º @babel/runtime-corejs2 ä¸­çš„å¼•ç”¨</p>
<p>@babel/runtime-corejs2 ä»…ä»…æ˜¯ä¸€ä¸ªåŒ…å«ç€å‡½æ•°çš„åŒ…ï¼ŒæŠŠå‡½æ•°ä»¥æ¨¡å—åŒ–çš„å½¢å¼å¼•å…¥, <strong>è¦å®‰è£…åˆ°ç”Ÿäº§ä¾èµ–ä¸­</strong></p>
<p>.babelrc</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;corejs&quot;</span>: <span class="number">3</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="treeshaking"><a href="#treeshaking" class="headerlink" title="treeshaking"></a>treeshaking</h4><p>webpack4 production é»˜è®¤å¼€å¯ï¼Œéœ€è¦å¼•å…¥çš„åº“ä½¿ç”¨commonjs æ¨¡å—åŒ–è§„èŒƒ</p>
<p>å¦‚ loadsh-es</p>
<h4 id="å…¨å±€å¼•å…¥"><a href="#å…¨å±€å¼•å…¥" class="headerlink" title="å…¨å±€å¼•å…¥"></a>å…¨å±€å¼•å…¥</h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/provide-plugin/#root">provide-plugin</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">    $: <span class="string">&#x27;jquery&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>å¤šå…¥å£æ–‡ä»¶çš„æ¯ä¸€ä¸ªéƒ½ä¼šè¢«å¼•å…¥jqueryï¼Œæ‰€ä»¥éœ€è¦æå–å…¬å…±ä»£ç </p>
<h4 id="åŠ¨æ€åŠ è½½"><a href="#åŠ¨æ€åŠ è½½" class="headerlink" title="åŠ¨æ€åŠ è½½"></a>åŠ¨æ€åŠ è½½</h4><p><a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import">@babel/plugin-syntax-dynamic-import</a></p>
<p><a target="_blank" rel="noopener" href="https://webpack.js.org/guides/code-splitting/#dynamic-imports">Dynamic Imports</a></p>
<p><strong>éœ€è¦æŒ‡æ˜webpackChunkNameæ‰èƒ½è¢«å•ç‹¬æ‰“åŒ…</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(</span><br><span class="line">   <span class="comment">/* webpackChunkName: &quot;my-jquery&quot; */</span></span><br><span class="line">   <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line"> )</span><br><span class="line">   .then(<span class="function">(<span class="params">&#123; <span class="keyword">default</span>: $ &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.log($)</span><br><span class="line">     <span class="keyword">return</span> $(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="ä»£ç åˆ†å‰²"><a href="#ä»£ç åˆ†å‰²" class="headerlink" title="ä»£ç åˆ†å‰²"></a>ä»£ç åˆ†å‰²</h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/split-chunks-plugin/#root">SplitChunksPlugin</a> ä»£æ›¿åŸæ¥çš„ commonChunksPlugin</p>
<ul>
<li>splitChunks.chunks</li>
</ul>
<p>asyncè¡¨ç¤ºåªä»å¼‚æ­¥åŠ è½½å¾—æ¨¡å—ï¼ˆåŠ¨æ€åŠ è½½import()ï¼‰é‡Œé¢è¿›è¡Œæ‹†åˆ†<br>initialè¡¨ç¤ºåªä»å…¥å£æ¨¡å—è¿›è¡Œæ‹†åˆ†<br>allè¡¨ç¤ºä»¥ä¸Šä¸¤è€…éƒ½åŒ…æ‹¬</p>
<ul>
<li>splitChunks.maxInitialRequests</li>
</ul>
<p>æ¯ä¸ªå…¥å£çš„å¹¶å‘è¯·æ±‚æ•°, å¦‚æœæ‹†å‡ºçš„åŒ…çš„ä¸ªæ•°å¤§äºmaxInitialRequestsï¼Œåˆ™ä¸ä¼šæŠŠè¾ƒå°çš„åŒ…å•ç‹¬æ‹†å‡º</p>
<ul>
<li>splitChunks.maxInitialRequests</li>
</ul>
<p>åŠ¨æ€å¼•å…¥çš„æ¨¡å—ï¼Œæœ€å¤šæ‹†åˆ†çš„æ•°é‡</p>
<h4 id="cssåˆ†å‰²"><a href="#cssåˆ†å‰²" class="headerlink" title="cssåˆ†å‰²"></a>cssåˆ†å‰²</h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/css-minimizer-webpack-plugin/">css-minimizer-webpack-plugin</a></p>
<h4 id="å‹ç¼©cssä»£ç "><a href="#å‹ç¼©cssä»£ç " class="headerlink" title="å‹ç¼©cssä»£ç "></a>å‹ç¼©cssä»£ç </h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/mini-css-extract-plugin/#getting-started">MiniCssExtractPlugin</a></p>
<h4 id="å¯è§†åŒ–åˆ†æ"><a href="#å¯è§†åŒ–åˆ†æ" class="headerlink" title="å¯è§†åŒ–åˆ†æ"></a>å¯è§†åŒ–åˆ†æ</h4><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/webpack-bundle-analyzer">webpack-bundle-analyzer</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-javascript/fp/Ramda_Objecæ–¹æ³•"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/168a1e12/"
    >Ramda Objectæ–¹æ³•æºç åˆ†æ</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/168a1e12/" class="article-date">
  <time datetime="2021-01-16T09:15:23.000Z" itemprop="datePublished">2021-01-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">å‡½æ•°å¼ç¼–ç¨‹</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="keys"><a href="#keys" class="headerlink" title="keys"></a>keys</h4><p>Safari å¯èƒ½å­˜åœ¨ argument.length å¯æšä¸¾çš„bug</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hasArgsEnumBug = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  &#x27;use strict&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">arguments</span>.propertyIsEnumerable(<span class="string">&#x27;length&#x27;</span>);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>

<p>IE9ä¸€ä¸‹<code>toString</code>æ–¹æ³•å­˜åœ¨å¯ä»¥æšä¸¾çš„bug</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cover IE &lt; 9 keys issues</span></span><br><span class="line"><span class="keyword">var</span> hasEnumBug = !(&#123;<span class="attr">toString</span>: <span class="literal">null</span>&#125;).propertyIsEnumerable(<span class="string">&#x27;toString&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> nonEnumerableProps = [</span><br><span class="line">  <span class="string">&#x27;constructor&#x27;</span>, <span class="string">&#x27;valueOf&#x27;</span>, <span class="string">&#x27;isPrototypeOf&#x27;</span>, <span class="string">&#x27;toString&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;propertyIsEnumerable&#x27;</span>, <span class="string">&#x27;hasOwnProperty&#x27;</span>, <span class="string">&#x27;toLocaleString&#x27;</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœæœ‰åŸç”Ÿ Object.keys å®ç°ä¸”Safariä¸å­˜åœ¨bug</span></span><br><span class="line"><span class="keyword">var</span> keys = <span class="keyword">typeof</span> <span class="built_in">Object</span>.keys === <span class="string">&#x27;function&#x27;</span> &amp;&amp; !hasArgsEnumBug ?</span><br><span class="line">  _curry1(<span class="function"><span class="keyword">function</span> <span class="title">keys</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å‚æ•°é”™è¯¯å¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>(obj) !== obj ? [] : <span class="built_in">Object</span>.keys(obj);</span><br><span class="line">  &#125;) :</span><br><span class="line">  _curry1(<span class="function"><span class="keyword">function</span> <span class="title">keys</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Object</span>(obj) !== obj) &#123;</span><br><span class="line">      <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> prop, nIdx;</span><br><span class="line">    <span class="keyword">var</span> ks = [];</span><br><span class="line">    <span class="comment">// å¦‚æœä¼ å…¥çš„å¯¹è±¡æ—¶argumentï¼Œè€Œä¸”æœ‰bug</span></span><br><span class="line">    <span class="keyword">var</span> checkArgsLength = hasArgsEnumBug &amp;&amp; _isArguments(obj);</span><br><span class="line">    <span class="comment">// å¾ªç¯å¯¹è±¡æ¯ä¸€é¡¹æ£€æŸ¥</span></span><br><span class="line">    <span class="keyword">for</span> (prop <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="keyword">if</span> (_has(prop, obj) &amp;&amp; (!checkArgsLength || prop !== <span class="string">&#x27;length&#x27;</span>)) &#123;</span><br><span class="line">        ks[ks.length] = prop;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰toStringå¯æšä¸¾çš„bug</span></span><br><span class="line">    <span class="keyword">if</span> (hasEnumBug) &#123;</span><br><span class="line">      nIdx = nonEnumerableProps.length - <span class="number">1</span>;</span><br><span class="line">      <span class="comment">// æ’é™¤ä¸å¯æšä¸¾çš„å±æ€§</span></span><br><span class="line">      <span class="keyword">while</span> (nIdx &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        prop = nonEnumerableProps[nIdx];</span><br><span class="line">        <span class="keyword">if</span> (_has(prop, obj) &amp;&amp; !contains(ks, prop)) &#123;</span><br><span class="line">          ks[ks.length] = prop;</span><br><span class="line">        &#125;</span><br><span class="line">        nIdx -= <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ks;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-javascript/fp/Ramda_ç§æœ‰æ–¹æ³•"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/2b6baf0c/"
    >Ramda ç§æœ‰æ–¹æ³•æºç åˆ†æ</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/2b6baf0c/" class="article-date">
  <time datetime="2021-01-16T08:26:50.000Z" itemprop="datePublished">2021-01-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">å‡½æ•°å¼ç¼–ç¨‹</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="objectIs"><a href="#objectIs" class="headerlink" title="_objectIs"></a>_objectIs</h4><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-cn/docs/web/javascript/reference/global_objects/object/is">Object.is</a> ç”¨äºåˆ¤æ–­ä¸¤å€¼æ˜¯å¦é¡¹ç­‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_objectIs</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// MDN polyfill</span></span><br><span class="line">  <span class="keyword">if</span> (a === b) &#123;</span><br><span class="line">    <span class="comment">// Steps 6.b-6.e: +0 != -0</span></span><br><span class="line">    <span class="keyword">return</span> a !== <span class="number">0</span> || <span class="number">1</span> / a === <span class="number">1</span> / b;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Step 6.a: NaN == NaN</span></span><br><span class="line">    <span class="keyword">return</span> a !== a &amp;&amp; b !== b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">typeof</span> <span class="built_in">Object</span>.is === <span class="string">&#x27;function&#x27;</span> ? <span class="built_in">Object</span>.is : _objectIs;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="arrayFromIterator"><a href="#arrayFromIterator" class="headerlink" title="_arrayFromIterator"></a>_arrayFromIterator</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_arrayFromIterator</span>(<span class="params">iter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> list = [];</span><br><span class="line">  <span class="keyword">var</span> next;</span><br><span class="line">  <span class="keyword">while</span> (!(next = iter.next()).done) &#123;</span><br><span class="line">    list.push(next.value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="functionName"><a href="#functionName" class="headerlink" title="_functionName"></a>_functionName</h4><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-cn/docs/web/javascript/reference/global_objects/function/name">function.name</a> å¯èƒ½è¢«å‹ç¼©å·¥å…·ä¿®æ”¹ï¼Œä¸èƒ½ä¾èµ–å‡½æ•°åæ¥åˆ¤æ–­å‡½æ•°</p>
<p>ä½œè€…é€šè¿‡æ­£åˆ™æ–¹å¼åˆ¤æ–­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_functionName</span>(<span class="params">f</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// String(x =&gt; x) evaluates to &quot;x =&gt; x&quot;, so the pattern may not match.</span></span><br><span class="line">  <span class="keyword">var</span> match = <span class="built_in">String</span>(f).match(<span class="regexp">/^function (\w*)/</span>);</span><br><span class="line">  <span class="keyword">return</span> match == <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : match[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="has"><a href="#has" class="headerlink" title="_has"></a>_has</h4><p>åˆ¤æ–­å±æ€§åœ¨å¯¹è±¡çš„å®ä¾‹ä¸Šï¼Œè€Œä¸æ˜¯åœ¨åŸå‹ä¸Š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_has</span>(<span class="params">prop, obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, prop);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç­‰ä»·äº</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.has(obj, prop)</span><br></pre></td></tr></table></figure>


<h4 id="isArguments"><a href="#isArguments" class="headerlink" title="_isArguments"></a>_isArguments</h4><p>å®ç°äº† <code>callee</code> æ–¹æ³•æ•°ç»„ä¹Ÿå¯ä»¥å½“ä½œæ˜¯å½¢å¼å‚æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"><span class="keyword">var</span> _isArguments = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> toString.call(<span class="built_in">arguments</span>) === <span class="string">&#x27;[object Arguments]&#x27;</span> ?</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_isArguments</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> toString.call(x) === <span class="string">&#x27;[object Arguments]&#x27;</span>; &#125; :</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_isArguments</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> _has(<span class="string">&#x27;callee&#x27;</span>, x); &#125;;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>

<h4 id="concat"><a href="#concat" class="headerlink" title="_concat"></a>_concat</h4><p>é€šè¿‡åŒå¾ªç¯ï¼Œæ¶µç›–äº†array-likeç±»å‹ï¼Œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Private `concat` function to merge two array-like objects.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@private</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array|Arguments&#125;</span> </span>[set1=[]] An array-like object.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array|Arguments&#125;</span> </span>[set2=[]] An array-like object.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;Array&#125;</span> </span>A new, merged array.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example</span></span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      _concat([4, 5, 6], [1, 2, 3]); //=&gt; [4, 5, 6, 1, 2, 3]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_concat</span>(<span class="params">set1, set2</span>) </span>&#123;</span><br><span class="line">  set1 = set1 || [];</span><br><span class="line">  set2 = set2 || [];</span><br><span class="line">  <span class="keyword">var</span> idx;</span><br><span class="line">  <span class="keyword">var</span> len1 = set1.length;</span><br><span class="line">  <span class="keyword">var</span> len2 = set2.length;</span><br><span class="line">  <span class="keyword">var</span> result = [];</span><br><span class="line"></span><br><span class="line">  idx = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (idx &lt; len1) &#123;</span><br><span class="line">    result[result.length] = set1[idx];</span><br><span class="line">    idx += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  idx = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (idx &lt; len2) &#123;</span><br><span class="line">    result[result.length] = set2[idx];</span><br><span class="line">    idx += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="dispatchable"><a href="#dispatchable" class="headerlink" title="_dispatchable"></a>_dispatchable</h4><p>dispatchableç¿»è¯‘ä¸ºè°ƒåº¦å•å…ƒï¼Œè¿™ä¸ªæ–¹æ³•ç”¨åœ¨äº†ç±»ä¼¼ <a href="/posts/6ac7a6cf/#all"><code>R.all</code></a> éå†æ¯ä¸€é¡¹çš„æ–¹æ³•ä¸Š</p>
<p>å¦‚æœå¦‚å‚æ˜¯ä¸€ä¸ªæ•°ç»„ä¼šæŒ‰ç…§å¸¸è§„å¾ªç¯æ–¹å¼å¤„ç†ï¼Œå¦‚æœä¸æ˜¯æ•°ç»„ä½†æ˜¯å¯¹è±¡æºå¸¦äº†ä¼ å…¥çš„æ–¹æ³•sæ•°ç»„(<code>[all]</code>)å…¶ä¸­çš„ä¸€ä¸ªï¼Œå°†ä¼šè°ƒç”¨å¯¹è±¡æºå¸¦çš„æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_dispatchable</span>(<span class="params">methodNames, transducerCreator, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> obj = <span class="built_in">arguments</span>[<span class="built_in">arguments</span>.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (!_isArray(obj)) &#123;</span><br><span class="line">      <span class="keyword">var</span> idx = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">while</span> (idx &lt; methodNames.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[methodNames[idx]] === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> obj[methodNames[idx]].apply(obj, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>, <span class="number">-1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        idx += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (_isTransformer(obj)) &#123;</span><br><span class="line">        <span class="keyword">var</span> transducer = transducerCreator.apply(<span class="literal">null</span>, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">return</span> transducer(obj);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="arrayFromIterator-1"><a href="#arrayFromIterator-1" class="headerlink" title="_arrayFromIterator"></a>_arrayFromIterator</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_arrayFromIterator</span>(<span class="params">iter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> list = [];</span><br><span class="line">  <span class="keyword">var</span> next;</span><br><span class="line">  <span class="keyword">while</span> (!(next = iter.next()).done) &#123;</span><br><span class="line">    list.push(next.value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="equals"><a href="#equals" class="headerlink" title="_equals"></a>_equals</h4><p>ç”¨åœ¨äº†æ¶‰åŠåˆ°æ¯”è¾ƒçš„æ–¹æ³•ä¸Š,ä¾‹å¦‚ <code>R.equals</code></p>
<p><a href="/posts/2b6baf0c/#_objectIs">_objectIs</a></p>
<p><a href="/posts/54a7cf63/#type">type</a></p>
<p><a href="/posts/54a7cf63/#_arrayFromIterator">_arrayFromIterator</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†map set é›†åˆ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_uniqContentEquals</span>(<span class="params">aIterator, bIterator, stackA, stackB</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = _arrayFromIterator(aIterator);</span><br><span class="line">  <span class="keyword">var</span> b = _arrayFromIterator(bIterator);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">eq</span>(<span class="params">_a, _b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> _equals(_a, _b, stackA.slice(), stackB.slice());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// if *a* array contains any element that is not included in *b*</span></span><br><span class="line">  <span class="keyword">return</span> !_includesWith(<span class="function"><span class="keyword">function</span>(<span class="params">b, aItem</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !_includesWith(eq, aItem, b);</span><br><span class="line">  &#125;, b, a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_equals</span>(<span class="params">a, b, stackA, stackB</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¼•ç”¨ç›¸åŒï¼ŒåŸºæœ¬ç±»å‹çš„å€¼ç›¸åŒ</span></span><br><span class="line">  <span class="keyword">if</span> (_objectIs(a, b)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç±»å‹ä¸åŒ</span></span><br><span class="line">  <span class="keyword">var</span> typeA = type(a);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (typeA !== type(b)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼•ç”¨ä¸åŒçš„æƒ…å†µ</span></span><br><span class="line">  <span class="comment">//  ??????</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> a[<span class="string">&#x27;fantasy-land/equals&#x27;</span>] === <span class="string">&#x27;function&#x27;</span> || <span class="keyword">typeof</span> b[<span class="string">&#x27;fantasy-land/equals&#x27;</span>] === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> a[<span class="string">&#x27;fantasy-land/equals&#x27;</span>] === <span class="string">&#x27;function&#x27;</span> &amp;&amp; a[<span class="string">&#x27;fantasy-land/equals&#x27;</span>](b) &amp;&amp;</span><br><span class="line">      <span class="keyword">typeof</span> b[<span class="string">&#x27;fantasy-land/equals&#x27;</span>] === <span class="string">&#x27;function&#x27;</span> &amp;&amp; b[<span class="string">&#x27;fantasy-land/equals&#x27;</span>](a);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœè‡ªèº«å®ç°äº†equalsæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> a.equals === <span class="string">&#x27;function&#x27;</span> || <span class="keyword">typeof</span> b.equals === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> a.equals === <span class="string">&#x27;function&#x27;</span> &amp;&amp; a.equals(b) &amp;&amp;</span><br><span class="line">      <span class="keyword">typeof</span> b.equals === <span class="string">&#x27;function&#x27;</span> &amp;&amp; b.equals(a);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¶ä»–å¼•ç”¨ç±»å‹</span></span><br><span class="line">  <span class="keyword">switch</span> (typeA) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Arguments&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Object&#x27;</span>:</span><br><span class="line">      <span class="comment">// å¼•ç”¨ç±»å‹å¦‚æœä¸ºPromiseå®ä¾‹ï¼Œçœ‹ä½œæ˜¯é¡¹ç­‰çš„</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> a.constructor === <span class="string">&#x27;function&#x27;</span> &amp;&amp;</span><br><span class="line">        _functionName(a.constructor) === <span class="string">&#x27;Promise&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> a === b;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// åŸºæœ¬ç±»å‹çš„è£…ç®±å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Boolean&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Number&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;String&#x27;</span>:</span><br><span class="line">      <span class="keyword">if</span> (!(<span class="keyword">typeof</span> a === <span class="keyword">typeof</span> b &amp;&amp; _objectIs(a.valueOf(), b.valueOf()))) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Date&#x27;</span>:</span><br><span class="line">    <span class="comment">// æ—¶é—´ç±»å‹è½¬ä¸ºäº‹ä»¶æˆ³</span></span><br><span class="line">      <span class="keyword">if</span> (!_objectIs(a.valueOf(), b.valueOf())) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Error&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> a.name === b.name &amp;&amp; a.message === b.message;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;RegExp&#x27;</span>:</span><br><span class="line">    <span class="comment">// æ­£åˆ™ç±»å‹çš„æ‰€æœ‰å®ä¾‹æ–¹æ³•çš„å®ç°ç›¸åŒ</span></span><br><span class="line">      <span class="keyword">if</span> (!(a.source === b.source &amp;&amp;</span><br><span class="line">          a.global === b.global &amp;&amp;</span><br><span class="line">          a.ignoreCase === b.ignoreCase &amp;&amp;</span><br><span class="line">          a.multiline === b.multiline &amp;&amp;</span><br><span class="line">          a.sticky === b.sticky &amp;&amp;</span><br><span class="line">          a.unicode === b.unicode)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¤„ç†map seté›†åˆ</span></span><br><span class="line">  <span class="keyword">var</span> idx = stackA.length - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (idx &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (stackA[idx] === a) &#123;</span><br><span class="line">      <span class="keyword">return</span> stackB[idx] === b;</span><br><span class="line">    &#125;</span><br><span class="line">    idx -= <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (typeA) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Map&#x27;</span>:</span><br><span class="line">      <span class="keyword">if</span> (a.size !== b.size) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> _uniqContentEquals(a.entries(), b.entries(), stackA.concat([a]), stackB.concat([b]));</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Set&#x27;</span>:</span><br><span class="line">      <span class="keyword">if</span> (a.size !== b.size) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> _uniqContentEquals(a.values(), b.values(), stackA.concat([a]), stackB.concat([b]));</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Arguments&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Object&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Boolean&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Number&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;String&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Date&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Error&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;RegExp&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Int8Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Uint8Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Uint8ClampedArray&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Int16Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Uint16Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Int32Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Uint32Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Float32Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Float64Array&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;ArrayBuffer&#x27;</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="comment">// Values of other types are only equal if identical.</span></span><br><span class="line">      <span class="comment">// å…¶ä»–ç±»å‹åªæœ‰å¼•ç”¨ç›¸åŒæ‰ç®—é¡¹ç­‰</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†æ•°ç»„æˆ–å¯¹è±¡çš„æ¯ä¸€ä¸ªå€¼æ˜¯å¦é¡¹ç­‰</span></span><br><span class="line">  <span class="keyword">var</span> keysA = keys(a);</span><br><span class="line">  <span class="keyword">if</span> (keysA.length !== keys(b).length) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> extendedStackA = stackA.concat([a]);</span><br><span class="line">  <span class="keyword">var</span> extendedStackB = stackB.concat([b]);</span><br><span class="line"></span><br><span class="line">  idx = keysA.length - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (idx &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> key = keysA[idx];</span><br><span class="line">    <span class="keyword">if</span> (!(_has(key, b) &amp;&amp; _equals(b[key], a[key], extendedStackA, extendedStackB))) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    idx -= <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-javascript/fp/Ramda_Relationæ–¹æ³•"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/13a0b176/"
    >Ramda Relation æ–¹æ³•æºç åˆ†æ</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/13a0b176/" class="article-date">
  <time datetime="2021-01-16T08:14:44.000Z" itemprop="datePublished">2021-01-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">å‡½æ•°å¼ç¼–ç¨‹</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
   
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-javascript/fp/Ramda_Mathæ–¹æ³•"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/12e07a8d/"
    >Ramda Math æ–¹æ³•æºç åˆ†æ</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/12e07a8d/" class="article-date">
  <time datetime="2021-01-16T07:45:51.000Z" itemprop="datePublished">2021-01-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">å‡½æ•°å¼ç¼–ç¨‹</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
   
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-javascript/fp/Ramdaä¸­çš„æŸ¯ç†åŒ–"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/33dcfd3a/"
    >Ramdaä¸­çš„æŸ¯ç†åŒ–</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/33dcfd3a/" class="article-date">
  <time datetime="2021-01-15T13:54:03.000Z" itemprop="datePublished">2021-01-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">å‡½æ•°å¼ç¼–ç¨‹</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="curry1"><a href="#curry1" class="headerlink" title="_curry1"></a>_curry1</h4><p>å†…ç½®æ¥å£ï¼Œä¿è¯äº†å‚æ•°çš„ä¸ªæ•°ï¼Œæ— éœ€åˆ¤æ–­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Optimized internal one-arity curry function.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@private</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@category <span class="variable">Function</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>fn The function to curry.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;Function&#125;</span> </span>The curried function.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_curry1</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">0</span> || _isPlaceholder(a)) &#123;</span><br><span class="line">      <span class="keyword">return</span> f1;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="curry2"><a href="#curry2" class="headerlink" title="_curry2"></a>_curry2</h4><p>å¦‚æœä»¥å€¼çš„çœŸå‡ä¸ºçº¬åº¦åˆ†æ”¯ä¼šæ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”ä¸èƒ½æ­£ç¡®å‚æ•°çš„ä½ç½®</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _curry2 = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a !== <span class="literal">undefined</span> &amp;&amp; b !== <span class="literal">undefined</span></span><br><span class="line">      ? _isPlaceholder(a) &amp;&amp; _isPlaceholder(b)</span><br><span class="line">        ? f2</span><br><span class="line">        : isPlaceholder(a)</span><br><span class="line">          ? _curry1(<span class="function"><span class="keyword">function</span> (<span class="params">_a</span>) </span>&#123; <span class="keyword">return</span> fn(_a, b) &#125;)</span><br><span class="line">          : _isPlaceholder(b)</span><br><span class="line">            ? _curry1(<span class="function"><span class="keyword">function</span> (<span class="params">_b</span>) </span>&#123; <span class="keyword">return</span> fn(a, _b) &#125;)</span><br><span class="line">            : fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">      : a !== <span class="literal">undefined</span></span><br><span class="line">        ? _curry1(<span class="function"><span class="keyword">function</span> (<span class="params">_b</span>) </span>&#123; <span class="keyword">return</span> fn(a, _b) &#125;)</span><br><span class="line">        : f2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½œè€…ä»¥å‚æ•°çš„ä¸ªæ•°ä¸ºçº¬åº¦è€ƒè™‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Optimized internal two-arity curry function.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@private</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@category <span class="variable">Function</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>fn The function to curry.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;Function&#125;</span> </span>The curried function.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_curry2</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="built_in">arguments</span>.length) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> f2;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="comment">// å¦‚æœaä¼ å…¥çš„æ˜¯undefinedä¹Ÿæ˜¯ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">        <span class="keyword">return</span> _isPlaceholder(a)</span><br><span class="line">          ? f2</span><br><span class="line">          : _curry1(<span class="function"><span class="keyword">function</span>(<span class="params">_b</span>) </span>&#123; <span class="keyword">return</span> fn(a, _b); &#125;);</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> _isPlaceholder(a) &amp;&amp; _isPlaceholder(b)</span><br><span class="line">          ? f2</span><br><span class="line">          : _isPlaceholder(a)</span><br><span class="line">            ? _curry1(<span class="function"><span class="keyword">function</span>(<span class="params">_a</span>) </span>&#123; <span class="keyword">return</span> fn(_a, b); &#125;)</span><br><span class="line">            : _isPlaceholder(b)</span><br><span class="line">              ? _curry1(<span class="function"><span class="keyword">function</span>(<span class="params">_b</span>) </span>&#123; <span class="keyword">return</span> fn(a, _b); &#125;)</span><br><span class="line">              : fn(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="curry3"><a href="#curry3" class="headerlink" title="_curry3"></a>_curry3</h4><p>åŒç†å¢åŠ åˆ†æ”¯åˆ¤æ–­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Optimized internal three-arity curry function.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@private</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@category <span class="variable">Function</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>fn The function to curry.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;Function&#125;</span> </span>The curried function.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_curry3</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="built_in">arguments</span>.length) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> f3;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> _isPlaceholder(a)</span><br><span class="line">          ? f3</span><br><span class="line">          : _curry2(<span class="function"><span class="keyword">function</span>(<span class="params">_b, _c</span>) </span>&#123; <span class="keyword">return</span> fn(a, _b, _c); &#125;);</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> _isPlaceholder(a) &amp;&amp; _isPlaceholder(b)</span><br><span class="line">          ? f3</span><br><span class="line">          : _isPlaceholder(a)</span><br><span class="line">            ? _curry2(<span class="function"><span class="keyword">function</span>(<span class="params">_a, _c</span>) </span>&#123; <span class="keyword">return</span> fn(_a, b, _c); &#125;)</span><br><span class="line">            : _isPlaceholder(b)</span><br><span class="line">              ? _curry2(<span class="function"><span class="keyword">function</span>(<span class="params">_b, _c</span>) </span>&#123; <span class="keyword">return</span> fn(a, _b, _c); &#125;)</span><br><span class="line">              : _curry1(<span class="function"><span class="keyword">function</span>(<span class="params">_c</span>) </span>&#123; <span class="keyword">return</span> fn(a, b, _c); &#125;);</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> _isPlaceholder(a) &amp;&amp; _isPlaceholder(b) &amp;&amp; _isPlaceholder(c)</span><br><span class="line">          ? f3</span><br><span class="line">          <span class="comment">// å…¶ä¸­ä¸¤ä¸ªæ˜¯å ä½ç¬¦çš„æƒ…å†µ</span></span><br><span class="line">          : _isPlaceholder(a) &amp;&amp; _isPlaceholder(b)</span><br><span class="line">            ? _curry2(<span class="function"><span class="keyword">function</span>(<span class="params">_a, _b</span>) </span>&#123; <span class="keyword">return</span> fn(_a, _b, c); &#125;)</span><br><span class="line">            : _isPlaceholder(a) &amp;&amp; _isPlaceholder(c)</span><br><span class="line">              ? _curry2(<span class="function"><span class="keyword">function</span>(<span class="params">_a, _c</span>) </span>&#123; <span class="keyword">return</span> fn(_a, b, _c); &#125;)</span><br><span class="line">              : _isPlaceholder(b) &amp;&amp; _isPlaceholder(c)</span><br><span class="line">                ? _curry2(<span class="function"><span class="keyword">function</span>(<span class="params">_b, _c</span>) </span>&#123; <span class="keyword">return</span> fn(a, _b, _c); &#125;)</span><br><span class="line">                <span class="comment">// å…¶ä¸­ä¸€ä¸ªæ˜¯å ä½ç¬¦çš„æƒ…å†µ</span></span><br><span class="line">                : _isPlaceholder(a)</span><br><span class="line">                  ? _curry1(<span class="function"><span class="keyword">function</span>(<span class="params">_a</span>) </span>&#123; <span class="keyword">return</span> fn(_a, b, c); &#125;)</span><br><span class="line">                  : _isPlaceholder(b)</span><br><span class="line">                    ? _curry1(<span class="function"><span class="keyword">function</span>(<span class="params">_b</span>) </span>&#123; <span class="keyword">return</span> fn(a, _b, c); &#125;)</span><br><span class="line">                    : _isPlaceholder(c)</span><br><span class="line">                      ? _curry1(<span class="function"><span class="keyword">function</span>(<span class="params">_c</span>) </span>&#123; <span class="keyword">return</span> fn(a, b, _c); &#125;)</span><br><span class="line">                      : fn(a, b, c);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="curry"><a href="#curry" class="headerlink" title="curry"></a>curry</h4><p>å…±æœ‰æ–¹æ³•curryçš„å®ç°ï¼Œ å¯¹å…±æœ‰æ–¹æ³•curryNçš„å°è£…ï¼Œåœ¨ä¸ç¡®å®šå‚æ•°ä¸ªæ•°æ—¶å€™é€šè¿‡ <code>fn.length</code> è·å–å‚æ•°é•¿åº¦</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> curry = _curry1(<span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> curryN(fn.length, fn);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="curryN"><a href="#curryN" class="headerlink" title="curryN"></a>curryN</h4><p>éœ€è¦æŒ‡å®šå‚æ•°çš„ä¸ªæ•°ï¼Œ æŠ½è±¡å‡ºå‚æ•°ä¸ªæ•°çš„åˆ¤æ–­ï¼Œæœ€å¤šä¸ªæ•°ä¸º10ä¸ªï¼Œé˜²æ­¢å‚æ•°è¿‡å¤šé€ æˆæ ˆæº¢å‡º</p>
<p>_arity å¯¹å‚æ•°ä¸ªæ•°çš„å¤„ç†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">_arity</span>(<span class="params">n, fn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* eslint-disable no-unused-vars */</span></span><br><span class="line">  <span class="keyword">switch</span> (n) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>); &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a0</span>) </span>&#123; <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>); &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a0, a1</span>) </span>&#123; <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>); &#125;;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>: <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a0, a1, a2, a3, a4, a5, a6, a7, a8, a9</span>) </span>&#123; <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>); &#125;;</span><br><span class="line">    <span class="keyword">default</span>: <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;First argument to _arity must be a non-negative integer no greater than ten&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> curryN = _curry2(<span class="function"><span class="keyword">function</span> <span class="title">curryN</span>(<span class="params">length, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (length === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> _curry1(fn);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> _arity(length, _curryN(length, [], fn));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨å‚æ•°è¾ƒå°‘æ—¶ä½¿ç”¨å…¶ä»–çš„å†…ç½®æ–¹æ³•  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curryN</span>(<span class="params">length, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> _curry2(<span class="function"><span class="keyword">function</span> (<span class="params">length, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> length === <span class="number">1</span></span><br><span class="line">      ? _curry1(fn)</span><br><span class="line">      : length === <span class="number">2</span></span><br><span class="line">        ? _curry2(fn)</span><br><span class="line">        : length === <span class="number">3</span></span><br><span class="line">          ? _curry3(fn)</span><br><span class="line">          : _arity(length, _curryN(length, [], fn))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="curryN-æ ¸å¿ƒæ–¹æ³•"><a href="#curryN-æ ¸å¿ƒæ–¹æ³•" class="headerlink" title="_curryN æ ¸å¿ƒæ–¹æ³•"></a>_curryN æ ¸å¿ƒæ–¹æ³•</h4><p>ä¸‹é¢æ˜¯ä¸€æ®µç³Ÿç³•çš„ä»£ç </p>
<p>receiveä¿æŒäº†æºæ•°ç»„çš„å¼•ç”¨ï¼Œä¸ç¬¦åˆå‡½æ•°å¼ç¼–æˆæ•°æ®ä¸å¯å˜çš„æ€æƒ³</p>
<p>æ¯æ¬¡æ·»åŠ æ–°å‚æ•°ï¼Œéƒ½è¦æŸ¥è¯¢å¯æ·»åŠ çš„ä½ç½®</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. çœŸå®å‚æ•°ä¸ªæ•°å’Œlengthé¡¹ç­‰ åˆ™æ‰§è¡Œå‡½æ•°</span></span><br><span class="line"><span class="comment">// 2. å®æ—¶è®°å½•å ä½ç¬¦çš„ä½ç½®ï¼Œ æ–°å‚æ•°ä¼˜å…ˆæ”¾åˆ°å ä½ç¬¦</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_curryN</span>(<span class="params">length, receive, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">fN</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> zw = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">findzw</span>(<span class="params">zw, receive</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">while</span> (zw &lt; receive.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (_isPlaceholder(receive[zw])) &#123;</span><br><span class="line">          <span class="comment">//æŒ‡å‘å ä½ç¬¦çš„å‰ä¸€ä½ï¼Œ æ–¹ä¾¿åé¢å¤„ç†</span></span><br><span class="line">          <span class="keyword">return</span> zw - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        zw++</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> zw - <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°å ä½ç¬¦çš„ä½ç½®</span></span><br><span class="line">    zw = findzw(zw, receive);</span><br><span class="line">    <span class="keyword">while</span> (index &lt; <span class="built_in">arguments</span>.length) &#123;</span><br><span class="line">      receive[zw + <span class="number">1</span>] = <span class="built_in">arguments</span>[index];</span><br><span class="line">      <span class="comment">//æ›´æ–°ä¹‹åé‡æ–°æŸ¥æ‰¾å ä½ç¬¦, æ¡è¿‡å½“å‰çš„å ä½ç¬¦</span></span><br><span class="line">      zw = findzw(zw + <span class="number">1</span>, receive);</span><br><span class="line">      index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰å ä½ç¬¦ åˆ™ä½ç½®+1ä¸ºå‚æ•°é•¿åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (zw + <span class="number">1</span> === length) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, receive)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// è®¡ç®—å‰©ä½™å‚æ•°</span></span><br><span class="line">      <span class="keyword">var</span> j = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> len = <span class="number">0</span></span><br><span class="line">      <span class="keyword">while</span> (j &lt; receive.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!_isPlaceholder(receive[index])) &#123;</span><br><span class="line">          len++;</span><br><span class="line">        &#125;</span><br><span class="line">        j++</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> _arity(length - len, _curryN(length, receive, fn))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æºç çš„å®ç°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_curryN</span>(<span class="params">length, receive, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¤åˆ¶å·²æ¥å—å‚æ•°çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> combined = [];</span><br><span class="line">    <span class="comment">// éå†å…¥å‚çš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">var</span> argsIdx = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// å‰©ä½™å‚æ•°</span></span><br><span class="line">    <span class="keyword">var</span> left = length;</span><br><span class="line">    <span class="comment">// éå†å·²æ¥å—å‚æ•°ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">var</span> combinedIdx = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå‚æ•°æ²¡æœ‰å¤åˆ¶å®Œæˆï¼Œæˆ–æ–°å¦‚å‚æ²¡æœ‰æ·»åŠ å®Œæˆåˆ™ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">while</span> (combinedIdx &lt; received.length || argsIdx &lt; <span class="built_in">arguments</span>.length) &#123;</span><br><span class="line">      <span class="keyword">var</span> result;</span><br><span class="line">      <span class="comment">// é€šè¿‡æ¡ä»¶è¯­å¥å¤„ç†äº†å ä½ç¬¦çš„é—®é¢˜</span></span><br><span class="line">      <span class="comment">// å¦‚æœè€å‚æ•°æ²¡æœ‰å¤åˆ¶å®Œæˆï¼Œä¸”å¤åˆ¶çš„å€¼ä¸æ˜¯å ä½ç¬¦ï¼Œæˆ–è€…å…¥å‚å·²ç»éƒ½å¤„ç†äº†ï¼Œç›´æ¥å–å‡ºå½“å‰çš„è€å‚æ•°ï¼Œç”¨äºå¤åˆ¶åˆ°æ–°çš„æ•°ç»„ä¸­</span></span><br><span class="line">      <span class="comment">// é€šè¿‡åŒæŒ‡é’ˆè§£å†³å ä½ç¬¦çš„é—®é¢˜</span></span><br><span class="line">      <span class="keyword">if</span> (combinedIdx &lt; received.length &amp;&amp;</span><br><span class="line">        (!_isPlaceholder(received[combinedIdx]) ||</span><br><span class="line">          argsIdx &gt;= <span class="built_in">arguments</span>.length)) &#123;</span><br><span class="line">        result = received[combinedIdx];</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè€å‚æ•°éƒ½å¤åˆ¶å®Œï¼Œæˆ–è€…æ—¶å ä½ç¬¦ï¼Œæˆ–è€…è¿˜æœ‰æ–°å‚æ•°æ²¡æœ‰å¤åˆ¶</span></span><br><span class="line">        <span class="comment">// å–ä¸€ä¸ªæ–°å‚æ•°åŠ åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">        result = <span class="built_in">arguments</span>[argsIdx];</span><br><span class="line">        argsIdx += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// æ·»åŠ åˆ°æ–°æ•°ç»„ä¸­</span></span><br><span class="line">      combined[combinedIdx] = result;</span><br><span class="line">      <span class="comment">// å¦‚æœä¸æ˜¯å ä½ç¬¦å‰©ä½™å‚æ•° -1</span></span><br><span class="line">      <span class="keyword">if</span> (!_isPlaceholder(result)) &#123;</span><br><span class="line">        left -= <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      combinedIdx += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰å‰©ä½™å‚æ•°ç›´æ¥æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">return</span> left &lt;= <span class="number">0</span></span><br><span class="line">      ? fn.apply(<span class="built_in">this</span>, combined)</span><br><span class="line">      <span class="comment">// å¦åˆ™é€šè¿‡_arityå›ºå®šæ–°å‡½æ•°çš„å‚æ•°ä¸ªæ•°</span></span><br><span class="line">      : _arity(left, _curryN(length, combined, fn));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/2/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2021
        <i class="ri-heart-fill heart_icon"></i> SunZhiqi
      </li>
    </ul>
    <ul>
      <li>
        
        
        <!--  -->
        ç”± <a href="https://hexo.io" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨
        <!-- <span class="division">|</span>
        ä¸»é¢˜ - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a> -->
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/logo.png" alt="å››æœˆå…«æ—¥"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="æœç´¢">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>å¸®åˆ°ä½ äº†ä¹ˆæœ‹å‹</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/kity.min.js"></script>


<script src="/js/kityminder.core.min.js"></script>


<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->

<!-- CanvasBackground -->


    
  </div>
</body>

</html>